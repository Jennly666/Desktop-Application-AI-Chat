# AI Chat — настольное приложение на Python с поддержкой OpenRouter.ai

AI Chat — это полнофункциональное настольное приложение с красивым Flet-интерфейсом, поддержкой множества AI-моделей через OpenRouter API, системой авторизации по API-ключу и PIN-коду, аналитикой, экспортом истории и локальным кэшированием.

Приложение подходит как для повседневного использования, так и как учебный или коммерческий проект.

# Основные возможности

### Авторизация и безопасность

* Первый запуск требует ввод **API-ключа OpenRouter**.
* Ключ проверяется на валидность.
* Приложение автоматически создаёт **уникальный 4-значный PIN-код**.
* Ключ и PIN сохраняются в локальной SQLite-базе.
* При последующих входах используется PIN-код.
* Кнопка **«Сбросить ключ»** позволяет удалить ключ и PIN и начать заново.

### Работа с AI-моделями

* Поддержка более **200+ AI-моделей** через OpenRouter.ai.
* Выбор модели через выпадающий список с поиском.
* Отображение текущего баланса аккаунта OpenRouter.
* Удобный чат-интерфейс с пузырями сообщений.
* Поддержка многоходовых диалогов.

### Аналитика

* Отслеживание:

  * количества сообщений
  * общего потребления токенов
  * средней скорости ответов
  * количества сообщений в минуту
* Хранение аналитики в SQLite.

### Кэширование и история

* Хранение всех диалогов локально.
* Автоматическая подгрузка предыдущих бесед.
* Экспорт истории в JSON одним кликом.
* Очистка истории.

### Технические возможности

* Полное логирование в `logs/`.
* Мониторинг системных ресурсов.
* Кроссплатформенность (Windows / Linux).
* Сборка в `.exe` и `.bin`.

---

# Установка и запуск

## 1. Установка зависимостей

Установите зависимости:

```bash
pip install -r requirements.txt
```

## 2. Настройка виртуального окружения

```bash
python -m venv venv
```

### Windows:

```bash
.\venv\Scripts\activate
```

### Linux/Mac:

```bash
source venv/bin/activate
```

---

# Настройка API-ключа

Создайте файл `.env` в корне проекта:

```
OPENROUTER_API_KEY=ваш_ключ_сюда
BASE_URL=https://openrouter.ai/api/v1
DEBUG=False
LOG_LEVEL=INFO
MAX_TOKENS=1000
TEMPERATURE=0.7
```

При первом запуске `.env` можно оставить пустым — приложение запросит ключ само.

---

# Первый запуск

Просто выполните:

```
python src/main.py
```

### Что произойдёт:

1. Появится окно ввода API-ключа OpenRouter.
2. Приложение проверит ключ.
3. Если он валиден — сгенерируется 4-значный PIN.
4. PIN будет показан в модальном окне.
5. После подтверждения откроется основной интерфейс чата.

---

# Повторные запуски

При следующем запуске вы увидите окно:

* поле ввода PIN
* кнопка «Сбросить ключ»

После правильного PIN система сразу откроет приложение.

---

# Сборка приложения

## Windows

```bash
pip install -r requirements.txt
python build.py
```

Готовый `.exe` появится в:

```
bin/AIChat.exe
```

## Linux

```bash
pip install -r requirements.txt
python3 build.py
chmod +x bin/aichat
```

---

# Структура проекта

```
├── assets/                # Ресурсы приложения (иконки и т.д.)
│   └── icon.ico
├── bin/                   # Скомпилированные исполняемые файлы
├── build/                 # Временные файлы сборщика
├── exports/               # Экспортированные чаты
├── logs/                  # Логи работы приложения
├── src/
│   ├── api/
│   │   └── openrouter.py      # API-клиент OpenRouter
│   ├── ui/
│   │   ├── components.py      # Компоненты UI
│   │   └── styles.py          # Стили интерфейса
│   ├── utils/
│   │   ├── analytics.py       # Аналитика
│   │   ├── cache.py           # Кэширование и база данных
│   │   ├── logger.py          # Логирование
│   │   └── monitor.py         # Системный монитор
│   └── main.py                # Основная логика и точка входа
├── build.py
├── requirements.txt
├── README.md
└── .env.example
```

---

# Экспорт чатов

Можно экспортировать историю чата в файл:

* формат: JSON
* путь: `exports/chat_history_YYYYMMDD_HHMMSS.json`

---

# Используемые технологии

* **Python 3.9+**
* **Flet** — UI-фреймворк
* **Requests** — запросы к API
* **SQLite** — локальная база данных
* **PyInstaller** — сборка приложения
* **dotenv** — конфигурация
* **OpenRouter API** — доступ к моделям AI
